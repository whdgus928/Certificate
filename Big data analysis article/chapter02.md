# 2. 빅데이터 탐색
## 2.1 데이터 전처리
데이터 전처리>데이터 정제,분석 변수처리

### 데이터 정제: raw data의 결측값, 이상값, 잡음 등을 찾아내 조치를 취하는 것

#### 결측값
- 완전 무작위 결측: 결측값이 변수들과 상관없이 발생
- 무작위 결측: 결측치가 특정 변수와 연관 있지만 전체 결과에는 영향이 없다
- 비무작위 결측: 누락된 값이 다른 변수와 연관 있는 경우

#### 결측치 처리
- 완전 분석법: 결측치 모두 제거
- 평균 대체법: 평균 혹은 회귀분석의 예측값으로 결측값 대체
- 단순 확률 대체법: 적절한 확률을 반영, ex) 이웃대체법: 범주형일 경우 가까운 데이터 중 최빈값, 연속형이면 이웃데이터의 중앙값으로 대체

#### 이상값: 소수라도 결과에 큰 영향을 줌

#### 이상값 진단 방법
1. 사분위수
- 상자그림
- Q1-1.5 x IQR ~ Q3+1.5 x IQR 벗어나면 이상치
2. 정규분포
- 평균으로부터 3표준편차 떨어진 값 ESD, 이상치로 판단
3. 데이터 간 거리 계산
- 2개 이상의 기준 변수가 설정되어야함
- 군집에 속하지 않은 값 이상치

#### 이상치 처리
- 제거: 모두 제거, 데이터 많고 이상값 적을때 적합
- 대체: 하한값, 상한값으로 이상값 대체, 평균이나 중앙값으로 대체
- 변환: 데이터 전체에 로그 혹은 제곱근을 취해 범위가 줄어들도록 변환

#### 변수선택: 독립변수 중 종속변수에 가장 영향 있을 만한 변수만을 선정, 독립변수가 많을수록 종속변수 예측 가능성 UP
1. 필터방법: 독립변수,종속변수 하나씩 통계적 기법을 이용해 상관이 있는 변수 찾기
- 관련 있는 변수만 걸러내기
- 상관이 있는것만 변수로 투입
- x**2검정, 상관관계분석, t-test
2. 래퍼방법: 독립변수 미리 정해놓고 예측 과정에서 예측과 분류에 기여하는 영향 변수만 선정
- 회귀분석 알고리즘에서 독립변수 중 유의미한 영향을 미치는 변수군만 찾아냄
- 전진방법(기여하는것 부터 투입),후진방식(무의미 제거), 단계선택법(두 과정 반복)
3. 임베디드방법: 모델링 기법 자체에 변수선택 방법이 포함
- 라소회귀분석: 가중치의 절댓값의 합을 최소화하는 제약조건, L1-norm
- 릿지회귀: 가중치들의 제곱 합을 최소화하는 제약조건, L2-norm 
- 엘라스틱넥: 가중치 절댓값의 합과 제곱 합을 동시 제약조건

### 차원축소: 변수의 정보를 최대한 유지하면서 개수를 줄이는 방법
1. 주성분 분석: 고차원 공간의 표본을 저차원 공간으로 변환, 정방행렬에서만 사용
2. 요인분석: 데이터 안의 구조 해석, 설문조사에서 활용
3. 독립성분분석: 비정규 분포를 따르는 차원축소 기법
4. 다차원 척도법: 유사성을 측정해 2,3차원 공간상에 점으로 표현
5. t-SNE: 지역 인접성을 보존하려고 시도하는 차원축소 알고리즘
6. 특이값 분해: 행렬데이터에서 특이값 추출하고 축약

장점: 데이터 양 줄어 분석시간 준다. 학습모델이 간단해진다.

### 파생변수: 기존 변수들을 이용해 새롭게 만든 변수

### 변수변환: 한 변수로 새로운 한 변수를 만든다
1. 구간화: 연속형 변수를 범주화
2. 단위 변환: 로그, 제곱근으로 변환
3. 정규화: 독립변수의 단위를 동일하게 하는 방법
- Min-Max Scaling: 대표적인 스케일링 방법, (x-xmin)/(xmax-xmin), 양의 값 가짐 
- standardization: 수치와 평균의 차이를 표준편차로 나눈 값
4. 더미변수화: 범주형 자료의 숫자를 0과 1로 변경
- 통계에서 더미변수, 머신러닝에서 원핫인코딩

### 불균형 데이터 처리: 환자 500명, 정상 9500명 차이가 커서 모델링 어렵다
1. 과소표집: 정상인 9500명에서 500명 추출
- 랜덤 언더 샘플링
- 토멕 링크 방법: 다수 클래스에 속한 토멕링크(경계선 가까이 있는 데이터) 제거
- CNN: 밀집된 데이터 제거, 대표적인 데이터만 남김
- OSS: 토멕 링크 + CNN
2. 과대표집: 환자 500을 정상 9500 가량으로 증가
- 랜덤 오버 샘플링
- SMOTE
- Borderline-SMOTE
- ADASYN

## 2.2 데이터 탐색
정상적인 범위 내에 있는가?
- 성별 1(남), 2(여)인데 3 입력되면 안됨
- 콜레스테롤 수치 0~240인데 500이면 안됨
- 히스토크램, 상자도표로 탐색

분포가 너무 한쪽으로 쏠리지 않았는가?
- 중심에 자료 많고 양끝으로 줄어드는 모양이 좋음
- 정규분포

경향성에서 크게 벗어난 값이 있는가?
- 산점도, 상관관계분석, 교차분석등으로 변수간 기초분석
